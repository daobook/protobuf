
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>安装 &#8212; protobuf 0.1 文档</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/translations.js"></script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="开发者指南" href="../docs/index.html" />
    <link rel="prev" title="Protocol Buffers - 谷歌的数据交换格式" href="../README.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="zh_CN">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">protobuf 0.1 文档</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../README.html">
   Protocol Buffers - 谷歌的数据交换格式
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   安装
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../docs/index.html">
   开发者指南
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../docs/field_presence.html">
     应用说明：Field 存在
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docs/implementing_proto3_presence.html">
     How To Implement Field Presence for Proto3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docs/jvm_aot.html">
     Ahead Of Time (AOT) compilation for the Java Virtual Machine (JVM)”
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docs/options.html">
     Protobuf Global Extension Registry
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docs/performance.html">
     Protobuf Performance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docs/third_party.html">
     Third-Party Add-ons for Protocol Buffers
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../python/README.html">
   Python API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../examples/README.html">
   代码样例
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../cmake/README.html">
   CMake
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../java/README.html">
   java
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../objectivec/README.html">
   objectivec
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../csharp/README.html">
   csharp
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../js/README.html">
   JavaScript
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ruby/README.html">
   ruby
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../php/README.html">
   PHP
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <div>
版权所有 © 2021 <a href="https://xinetzone.github.io/">xinetzone</a></div>
<div>由 <a href="https://ebp.jupyterbook.org/">EBP</a> 提供技术支持</div>

</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/src/README.md.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/daobook/protobuf"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/daobook/protobuf/issues/new?title=Issue%20on%20page%20%2Fsrc/README.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/daobook/protobuf/edit/xin/src/README.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> 导航
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#c-installation-unix">
   Unix
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#c-installation-windows">
   C++ Installation - Windows
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#binary-compatibility-warning">
   Binary Compatibility Warning
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="protocol-buffers-googles-data-interchange-format">
<h1>安装<a class="headerlink" href="#protocol-buffers-googles-data-interchange-format" title="永久链接至标题">¶</a></h1>
<p>Copyright 2008 Google Inc.</p>
<p>https://developers.google.com/protocol-buffers/</p>
<div class="section" id="c-installation-unix">
<h2>Unix<a class="headerlink" href="#c-installation-unix" title="永久链接至标题">¶</a></h2>
<p>要从源代码构建 protobuf，需要以下工具：</p>
<ul class="simple">
<li><p>autoconf</p></li>
<li><p>automake</p></li>
<li><p>libtool</p></li>
<li><p>make</p></li>
<li><p>g++</p></li>
<li><p>unzip</p></li>
</ul>
<p>在 Ubuntu/Debian 上，你可以用以下方法安装它们：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get install autoconf automake libtool curl make g++ unzip
</pre></div>
</div>
<p>在其他平台上，请使用相应的软件包管理工具进行安装，然后再继续。</p>
<p>要获得源代码，请下载发布页中的一个 .tar.gz 或 .zip 包：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>https://github.com/protocolbuffers/protobuf/releases/latest
</pre></div>
</div>
<p>例如：如果你只需要 C++，请下载 <code class="docutils literal notranslate"><span class="pre">protobuf-cpp-[VERSION].tar.gz</span></code>；如果你需要 C++ 和 Java，请下载 <code class="docutils literal notranslate"><span class="pre">protobuf-java-[VERSION].tar.gz</span></code>（每个包都已经包含 C++ 的源代码）；如果你需要 C++ 和多种其他语言，请下载 <code class="docutils literal notranslate"><span class="pre">protobuf-all-[VERSION].tar.gz</span></code>。</p>
<p>你也可以通过 “git clone” 我们的 git 存储库来获得源代码。确保你也克隆了子模块并生成了配置脚本（如果你使用的是发布版的 .tar.gz 或 .zip 包，则跳过这一步）：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/protocolbuffers/protobuf.git
cd protobuf
git submodule update --init --recursive
./autogen.sh
</pre></div>
</div>
<p>要建立和安装 C++ 协议缓冲区运行时间和协议缓冲区编译器（protoc），请执行以下内容：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> ./configure
 make
 make check
 sudo make install
 sudo ldconfig # refresh shared library cache.
</pre></div>
</div>
<p>如果 “make check” 失败，你仍然可以安装，但这个库的某些功能很可能无法在你的系统上正确工作。请自行承担风险。</p>
<p>关于 configure 和 make 的高级使用信息，请参考 autoconf 文档：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>http://www.gnu.org/software/autoconf/manual/autoconf.html#Running-configure-Scripts
</pre></div>
</div>
<p><strong>关于安装位置的提示</strong></p>
<p>默认情况下，该软件包将被安装到/usr/local。然而，在许多平台上，/usr/local/lib 并不是 LD_LIBRARY_PATH 的一部分。你可以添加它，但直接安装到/usr可能更容易。要做到这一点，请按如下方式调用 configure：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure --prefix=/usr
</pre></div>
</div>
<p>如果你已经用不同的前缀构建了软件包，请确保在再次构建之前运行 “make clean” 。</p>
<p><strong>Compiling dependent packages</strong></p>
<p>To compile a package that uses Protocol Buffers, you need to pass
various flags to your compiler and linker.  As of version 2.2.0,
Protocol Buffers integrates with pkg-config to manage this.  If you
have pkg-config installed, then you can invoke it to get a list of
flags like so:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pkg-config --cflags protobuf         # print compiler flags
pkg-config --libs protobuf           # print linker flags
pkg-config --cflags --libs protobuf  # print both
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>c++ my_program.cc my_proto.pb.cc `pkg-config --cflags --libs protobuf`
</pre></div>
</div>
<p>Note that packages written prior to the 2.2.0 release of Protocol
Buffers may not yet integrate with pkg-config to get flags, and may
not pass the correct set of flags to correctly link against
libprotobuf.  If the package in question uses autoconf, you can
often fix the problem by invoking its configure script like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>configure CXXFLAGS=&quot;$(pkg-config --cflags protobuf)&quot; \
          LIBS=&quot;$(pkg-config --libs protobuf)&quot;
</pre></div>
</div>
<p>This will force it to use the correct flags.</p>
<p>If you are writing an autoconf-based package that uses Protocol
Buffers, you should probably use the PKG_CHECK_MODULES macro in your
configure script like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PKG_CHECK_MODULES([protobuf], [protobuf])
</pre></div>
</div>
<p>See the pkg-config man page for more info.</p>
<p>If you only want protobuf-lite, substitute “protobuf-lite” in place
of “protobuf” in these examples.</p>
<p><strong>Note for Mac users</strong></p>
<p>For a Mac system, Unix tools are not available by default. You will first need
to install Xcode from the Mac AppStore and then run the following command from
a terminal:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo xcode-select --install
</pre></div>
</div>
<p>To install Unix tools, you can install “port” following the instructions at
https://www.macports.org . This will reside in /opt/local/bin/port for most
Mac installations.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo /opt/local/bin/port install autoconf automake libtool
</pre></div>
</div>
<p>Then follow the Unix instructions above.</p>
<p><strong>Note for cross-compiling</strong></p>
<p>The makefiles normally invoke the protoc executable that they just
built in order to build tests.  When cross-compiling, the protoc
executable may not be executable on the host machine.  In this case,
you must build a copy of protoc for the host machine first, then use
the –with-protoc option to tell configure to use it instead.  For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure --with-protoc=protoc
</pre></div>
</div>
<p>This will use the installed protoc (found in your $PATH) instead of
trying to execute the one built during the build process.  You can
also use an executable that hasn’t been installed.  For example, if
you built the protobuf package for your host machine in …/host,
you might do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure --with-protoc=../host/src/protoc
</pre></div>
</div>
<p>Either way, you must make sure that the protoc executable you use
has the same version as the protobuf source code you are trying to
use it with.</p>
<p><strong>Note for Solaris users</strong></p>
<p>Solaris 10 x86 has a bug that will make linking fail, complaining
about libstdc++.la being invalid.  We have included a work-around
in this package.  To use the work-around, run configure as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure LDFLAGS=-L$PWD/src/solaris
</pre></div>
</div>
<p>See src/solaris/libstdc++.la for more info on this bug.</p>
<p><strong>Note for HP C++ Tru64 users</strong></p>
<p>To compile invoke configure as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure CXXFLAGS=&quot;-O -std ansi -ieee -D__USE_STD_IOSTREAM&quot;
</pre></div>
</div>
<p>Also, you will need to use gmake instead of make.</p>
<p><strong>Note for AIX users</strong></p>
<p>Compile using the IBM xlC C++ compiler as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure CXX=xlC
</pre></div>
</div>
<p>Also, you will need to use GNU <code class="docutils literal notranslate"><span class="pre">make</span></code> (<code class="docutils literal notranslate"><span class="pre">gmake</span></code>) instead of AIX <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p>
</div>
<div class="section" id="c-installation-windows">
<h2>C++ Installation - Windows<a class="headerlink" href="#c-installation-windows" title="永久链接至标题">¶</a></h2>
<p>If you only need the protoc binary, you can download it from the release
page:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>https://github.com/protocolbuffers/protobuf/releases/latest
</pre></div>
</div>
<p>In the downloads section, download the zip file protoc-$VERSION-win32.zip.
It contains the protoc binary as well as public proto files of protobuf
library.</p>
<p>Protobuf and its dependencies can be installed directly by using <code class="docutils literal notranslate"><span class="pre">vcpkg</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;vcpkg install protobuf protobuf:x64-windows
</pre></div>
</div>
<p>If zlib support is desired, you’ll also need to install the zlib feature:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;vcpkg install protobuf[zlib] protobuf[zlib]:x64-windows
</pre></div>
</div>
<p>See https://github.com/Microsoft/vcpkg for more information.</p>
<p>To build from source using Microsoft Visual C++, see <a class="reference internal" href="../cmake/README.html"><span class="doc std std-doc">cmake/README.md</span></a>.</p>
<p>To build from source using Cygwin or MinGW, follow the Unix installation
instructions, above.</p>
</div>
<div class="section" id="binary-compatibility-warning">
<h2>Binary Compatibility Warning<a class="headerlink" href="#binary-compatibility-warning" title="永久链接至标题">¶</a></h2>
<p>Due to the nature of C++, it is unlikely that any two versions of the
Protocol Buffers C++ runtime libraries will have compatible ABIs.
That is, if you linked an executable against an older version of
libprotobuf, it is unlikely to work with a newer version without
re-compiling.  This problem, when it occurs, will normally be detected
immediately on startup of your app.  Still, you may want to consider
using static linkage.  You can configure this package to install
static libraries only using:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure --disable-shared
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="永久链接至标题">¶</a></h2>
<p>The complete documentation for Protocol Buffers is available via the
web at:</p>
<p>https://developers.google.com/protocol-buffers/</p>
</div>
</div>


              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../README.html" title="上一页 页">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">上一页</p>
            <p class="prev-next-title">Protocol Buffers - 谷歌的数据交换格式</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../docs/index.html" title="下一页 页">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">下一页</p>
        <p class="prev-next-title">开发者指南</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By xinetzone<br/>
        
            &copy; Copyright 2021, xinetzone.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>